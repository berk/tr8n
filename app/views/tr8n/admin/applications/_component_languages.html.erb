<% form_tag("", :id => "lang_form") do %>
<%= hidden_field_tag(:type, "language") %>
<%= will_filter_table_tag(@results, :columns => [
    [:checkbox, 'component_languages'],     
    [:flag, lambda{|ulang| ulang.language ? image_tag("/tr8n/images/flags/#{ulang.language.flag}.png") : ''}],
    [:locale, lambda{|ulang|
      lang = ulang.language
      html = []
      if lang.enabled?
        html << '<span style="color:green">'
      else  
        html << '<span style="color:red">'
      end
      html << lang.locale
      html << '</span>'
      html.join(' ')
    }],
    [:english_name, lambda{|ulang| link_to(ulang.language.english_name, :action => :view, :lang_id => ulang.language.id)}],
    [:native_name, lambda{|ulang| ulang.language.native_name}],
    [:right_to_left, lambda{|ulang|
      lang = ulang.language
      html = []
      if lang.right_to_left?
        html << '<span style="color:red">'
      else  
        html << '<span style="color:green">'
      end
      html << lang.right_to_left?
      html << '</span>'
      html.join(' ')
    }],
    [:actions, lambda{|ulang|
      html = []
      html << link_to("Remove", {:action => :remove_objects_from_component, :component_object_id => ulang.id, :type => :language}, {:confirm => "Are you sure you want to remove this language from the component?"})
      html.join(' | ')
    }, 'padding:5px;text-align:right;white-space:nowrap;']        
  ]) %>
<% end %>

<%= will_filter_actions_bar_tag(@keys, [
  ['Remove Selected Languages', 'removeAllSelected()']
]) %>

<script>
  function removeAllSelected() {
    if (!confirm('Are you sure you want to remove all selected languages from this component?'))
       return;
    Tr8n.element('lang_form').action = "/tr8n/admin/applications/remove_objects_from_component";
    Tr8n.element('lang_form').submit();
  }
</script>   
