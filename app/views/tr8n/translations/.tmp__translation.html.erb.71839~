<td style="text-align:left; vertical-align:top; padding-top:3px;">
  <table>
    <tr>
      <td style="vertical-align:top;padding-right:2px;">
        <%=tr8n_user_mugshot_tag(translation.translator, :linked => true)%>
      </td>
      <td style="vertical-align:top">
        <%=tr8n_user_tag(translation.translator, :linked => true)%>
        <div style="color:grey;">
            <%=translation.created_at.trl(:date_time) %>
        </div>
				<%=tr8n_translator_rank_tag(translation.translator)%>
      </td>
    </tr>
  </table>
</td>

<td style="text-align:right; vertical-align:top; padding-top:3px;">
  <%=tr8n_spinner_tag("spinner_for_#{translation.id}", "", "")%>
  <div id="tr8n_votes_for_<%=translation.id%>" style="">
    <%= translation.rank_label %> 
  </div>  
</td>  

<td style="text-align:center; vertical-align:top; color:grey; padding-top:3px;">
  <% if translation.translation_key.locked? %>
    <div style="text-align:center;padding-top:4px;"><%=image_tag("/tr8n/images/lock.png", :style=>"width:12px", :title => trl("This phrase is locked"))%></div>
	<% else %>
    <%=link_to_function(image_tag("/tr8n/images/thumb_up.png"), "tr8nTranslator.voteOnTranslation('#{translation.translation_key.key}', '#{translation.id}', 1)")%> 
    <%=link_to_function(image_tag("/tr8n/images/thumb_down.png"), "tr8nTranslator.voteOnTranslation('#{translation.translation_key.key}','#{translation.id}', -1)")%> 
    <%=link_to_function(image_tag("/tr8n/images/exclamation.png"), "tr8nTranslator.reportTranslation('#{translation.translation_key.key}','#{translation.id}')")%>
  <% end %>   
</td>

<td style="text-align:left; vertical-align:top; padding-top:3px;">
  <% if mode == :view and translation.can_be_edited_by?(tr8n_current_translator) %>
    <span onDblClick="updateTranslationRow('<%=translation.id%>', 'edit')" title="Translation for: <%=translation.key.label%>">
      <%= translation.label %> 
    </span>
  <% elsif mode == :edit %>
    <%= text_area_tag("translation_row_value_#{translation.id}", translation.label, :style=>"width:99%;height:60px;border:1px solid #ccc;", :class => "keyboardInput" ) %>
	<% else %>	
    <%= translation.label %>
  <% end %>

  <% if translation.context %>
    <div style="font-size: 11px; color: grey; padding-top:3px;">
      <%=trl("Context:")%> <%= translation.context %>  
    </div>
  <% end %>

  <% if [:list, :short_list].include?(mode) %>
	  <% color = translation.key.locked? ? "#ECFFEF" : "#FDFFF0" %>
    <div style="font-size: 11px; color: grey; margin-top:5px; margin-bottom:5px; padding:3px; background:<%=color%>; border:1px dotted #ccc;">
      <% if translation.key.locked? %>
        <div style="float:right"><%=image_tag("/tr8n/images/lock.png", :style=>"width:12px", :title => trl("This phrase is locked"))%></div>
      <% end %>
		
		  <%=link_to(translation.key.label, :controller => "/tr8n/phrases", :action => :view, :locale => language.locale, :translation_key_id => translation.key.id) %>
      <br><%= translation.key.description %>  
    </div>
  <% end %>
</td>

<td style="text-align:right; vertical-align:top; padding-top:3px;">
   <% if mode == :view %> 
      <% if translation.can_be_edited_by?(tr8n_current_translator) %>
		      <%=link_to_function(image_tag("/tr8n/images/pencil.png"), "updateTranslationRow('#{translation.id}', 'edit')")%>
		      <%=link_to_function(image_tag("/tr8n/images/cross.png"), "deleteTranslationRow('#{translation.id}', '#{@section_key}')")%>
			<% elsif translation.can_be_deleted_by?(tr8n_current_translator)  %>
          <%=link_to_function(image_tag("/tr8n/images/cross.png"), "deleteTranslationRow('#{translation.id}', '#{@section_key}')")%>
			<% end %>		
  <% elsif mode == :edit %>
      <%=link_to_function(image_tag("/tr8n/images/disk.png"), "submitTranslationRow('#{translation.id}')")%>
      <%=link_to_function(image_tag("/tr8n/images/cancel.png"), "updateTranslationRow('#{translation.id}', 'view')")%>
  <% else %>
      <%=link_to(image_tag("/tr8n/images/table_edit.png"), :controller => "/tr8n/phrases", :action => :view, :locale => language.locale, :translation_key_id => translation.key.id) %>
  <% end %>
</td>

<% if mode == :edit %>
	<script>
	  VKI_attach(document.getElementById("translation_row_value_<%=translation.id%>"));
	</script>
<% end %>